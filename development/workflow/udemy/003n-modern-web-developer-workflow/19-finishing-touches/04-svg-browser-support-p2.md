# SVG Browser support - Part 2
* What CSS does this file generate?

`sprite.css`

```
/* Do not edit modules/_sprite.css directly as it is generated automatically by Gulp
Instead edit gulp/templates/sprite.css */

{{#shapes}}
  {{#first}}
    .icon {
      background-image: url("/assets/images/sprites/{{{sprite}}}");
    }

    .no-svg .icon {
      background-image: url("/assets/images/sprites/{{{sprite}}}");
    }
  {{/first}}

  .icon--{{base}} {
    width: {{width.outer}}px;
    height: {{height.outer}}px;
    background-position: {{position.relative.xy}};
  }
{{/shapes}}
```

`/app/assets/styles/modules/_sprite.css`

```
/* Do not edit modules/_sprite.css directly as it is generated automatically by Gulp
Instead edit gulp/templates/sprite.css */

    .icon {
      background-image: url("/assets/images/sprites/sprite-69f19c2e.svg");
    }
```

## Create a filter function
* That will replace `.svg` with `.png`
    - And we can use that filter function within the styles.css template file

`sprites.js`

```
// more code
var config = {
  mode: {
    css: {
      variables: {
        replaceSvgWithPng: function() {
          return function(sprite, render) {
            
          }
        }
      },
      sprite: 'sprite.svg',
// more code
```

* Now we will use this **filter function** inside our CSS template file

`sprite.css`

```
{{#shapes}}
  {{#first}}
    .icon {
      background-image: url("/assets/images/sprites/{{{sprite}}}");
    }

    .no-svg .icon {
      background-image: url("/assets/images/sprites/{{#replaceSvgWithPng}}{{{sprite}}}{{/replaceSvgWithPng}}");
    }
  {{/first}}
```

* We want to return the `render()` method
    - The `render()` method gives us access to the CSS that lives in the template
    - Once we have access to that CSS we want to be on the lookout for that sprite variable
        + The sprite variable is that dynamic filename that we have no other way of predicting
            * Our sprite package will create a file named something like `sprite-RANDOMSTRING.svg`
            * Now that we have that file, we want to do something with it
                - `return render(sprite).split('.svg')`
                    + That will split the string into an array with `.svg` removed
                        * And then we put the array back together `.join()` with `.png` as the glue

```js
// more code
var config = {
  mode: {
    css: {
      variables: {
        replaceSvgWithPng: function() {
          return function(sprite, render) {
            return render(sprite).split('.svg').join('.png');
          }
        }
      },
      sprite: 'sprite.svg',
      render: {
        css: {
          template: './gulp/templates/sprite.css'
        }
      }
    }
  }
}
// more code
```

* You should have `$ gulp watch` running in one terminal tab already
* Open a new tab and `$ gulp icons`
* That should generate the following code:

`_sprite.css`

```
/* Do not edit modules/_sprite.css directly as it is generated automatically by Gulp
Instead edit gulp/templates/sprite.css */

    .icon {
      background-image: url("/assets/images/sprites/sprite-69f19c2e.svg");
    }

    .no-svg .icon {
      background-image: url("/assets/images/sprites/sprite-69f19c2e.png");
    }
```

* We now have our PNG and SVG classes both autogenerated with random names

## Test in browser
* We know our logo is a SVG
* Inspect it

![using svg](https://i.imgur.com/e0elZHw.png)

* But if we fake that we are an older browser and changing the
* Manually change this:

![svg](https://i.imgur.com/Ioo9Lb6.png)

* To this:

![no-svg](https://i.imgur.com/5FXy1ld.png)

* And you will see we our pointing to the PNG instead

![png image](https://i.imgur.com/liTQIeK.png)

## Next - Fallback for Flexbox in older browsers

