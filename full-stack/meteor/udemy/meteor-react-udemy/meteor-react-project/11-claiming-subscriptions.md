# Claiming bins with subscriptions
We created our publication on the **server** and now we need to consume this publication on the **client** side

* **Publications** provide data
* **Subscriptions** consume data

## BinsList Component
We will have a bunch of components related to `bins` so for proper organization, we will create a folder inside `components` called `bins` and place `BinsList.js` inside of it

`$ mkdir client/components/bins`

`$ touch client/components/bins/BinsList.js`

### Purpose of BinsList Component
* Create a container
* Pull data from the bins publication
* And show it as a list

**note** This will be a **class-based** Component

`client/components/bins/BinsList.js`

```
import React, { Component } from 'react';
import { createContainer } from 'meteor/react-meteor-data';
import { Bins } from '../../../imports/collections/bins';

class BinsList extends Component {
  render() {
    console.log(this.props.bins);
    return (
      <div>
        <table className="table">
          <thead>
            <tr>
              <td>one</td>
              <td>two</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>one</td>
              <td>two</td>
            </tr>
          </tbody>
        </table>
      </div>
    );
  }
}

export default createContainer(() => {
  Meteor.subscribe('bins');

  return { bins: Bins.find({}).fetch() };
}, BinsList);
```

**note** In a **subscription** (_aka client side_) whenever we do a `Bins.find()`, this is going to be only fetching data that is only available on the client side collection. We are not going to get all `bins` but rather only `bins` that are provided via the `bins` **subscription** and **publication**

### Test it out
Add this line: `console.log(this.props.bins);`

```
// more code
class BinsList extends Component {
  render() {
    console.log(this.props.bins);
    return (
// more code
```

So we can test to see if it works

### Show BinsList component in React UI
`client/components/App.js`

```
import React from 'react';

import Header from './Header';
import BinsList from './bins/BinsList';
export default () => {
  return (
     <div>
       <Header />
       <BinsList />
     </div>
  );
};
```

### View in browser
Test to see if it works

You will see in the console every time you click `Create Bin` a new collection is added. Refresh the page and it is still there. If you clicked `Create Bin` 3 times you'll have an array of 3 Objects

![bin objects](https://i.imgur.com/ALrCi5Z.png)

**note** Also you will see that code is running twice. When the app loads (_ or component rendered one time before any new data was available_) and once the data is available through the bin's subscription and publication we get a second console.log()

#### Here's what is inside our object
* `_id` - unique id generated by mongoDb
* `content` - empty string
* `createdAt` - Timestamp of current data
* `ownerId` - created by MongoDB when we logged in
* `sharedWith` - empty array

### Test authentication
If we use an incognito chrome browser window

You will see the Array is empty but if we click the **Create Bin**, we can create a bin. We need to fix this as only logged in users can Create Bins. Currently if someone not logged in creates a bin, their `ownerId` will be set to `null` or `undefined`

## Next Challenge
We will just for fun allow anonymous users to create a bin that will be accessible by everyone





